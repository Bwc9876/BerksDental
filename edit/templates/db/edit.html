{% extends 'admin_base.html' %}
{% comment %}
    This file is used to edit an object in the database
    This file will keep being rendered with the required errors until the forms is filled out correctly
    We use the {% csrf_token %} tag to ensure the edit was invoked by the user, and not a malicous third-party
    We loop through every field in the form and render it
    We set the enctype to "multipart/form-data" so files can be uploaded
{% endcomment %}

{% block adminLinks %}

    <style>


        .form {
            --text-size: 20px;
            --help-error-text-size: calc(var(--text-size) - 5px);
        }

        ul.errorList {
            list-style: none;
            padding-left: 0;
            margin-bottom: 0;
            font-size: var(--help-error-text-size);
        }

        li.error {
            color: #ff0000;
        }

        fieldset.hiddenField {
            display: none;
        }

        label.fieldLabel {
            margin-bottom: 20px;
            margin-right: 20px;
            user-select: none;
            font-weight: bold;
            vertical-align: top;
        }

        textarea {
            resize: none;
        }

        fieldset {
            padding: 2vh;
            border: none;
            border-top: solid 1px var(--ac-grey);
        }

        fieldset:last-of-type {
            margin-bottom: 20px;
            border-bottom: solid 1px var(--ac-grey);
        }

        input, textarea, a.currentPhotoLink, label.fieldLabel {
            font-size: var(--text-size);
        }

        input[type="checkbox"] {
            width: calc(var(--text-size) - 2px);
            height: calc(var(--text-size) - 2px);
            vertical-align: center;
        }

        button.submitButton {
            width: 100%;
        }

        .help-text {
            font-size: var(--help-error-text-size);
        }

        .permLabel {
            font-size: calc(var(--text-size) - 2px);
        }

        select {
            font-size: calc(var(--text-size) - 3px);
        }

        .requiredMarker {
            color: var(--red-color);
        }

    </style>

    {{ form.media }}

{% endblock %}

{% block adminContent %}

    {% load adminTags %}

    {% if form %}

        {% if form.non_field_errors %}

            <ul id="nonfield_errors" class="errorList">
                {% for error in form.non_field_errors %}
                    <li class="error">{{ error }}</li>
                {% endfor %}
            </ul>

        {% endif %}

        <form class="form" method="POST" enctype="multipart/form-data">

            {% csrf_token %}
            {% for field in form %}
                <fieldset id="{{ field.label }}_fieldset">
                    {% if field.errors %}
                        <ul class="errorList" id="{{ field.label }}_errors">
                            {% for error in field.errors %}
                                <li class="error">{{ error }}</li>
                            {% endfor %}
                        </ul>
                    {% endif %}
                    {% if field|is_checkbox %}
                        {{ field }}
                        <label for="{{ field.id_for_label }}" class="fieldLabel h4">{{ field.label|title }}</label>
                    {% else %}
                    <label for="{{ field.id_for_label }}" class="fieldLabel h4">{{ field.label|title }}:</label>
                        {{ field }}
                    {% endif %}
                    {% if field.help_text %}
                        <p id="{{ field.label }}_help-text" class="help-text">{{ field.help_text }}</p>
                    {% endif %}
                </fieldset>
            {% endfor %}

            <button class="submitButton" type="submit">{% block submitWord %}Save{% endblock %}</button>

        </form>

    {% else %}

        <h1>No Form Object Passed!</h1>

    {% endif %}

{% endblock %}